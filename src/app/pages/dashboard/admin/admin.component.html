<div class="inner-content mb-20" xmlns:svg="http://www.w3.org/2000/svg">
  <app-title-divider title="{{'HOME.DASHBOARD.DAILY_STATS' |translate}}"></app-title-divider>
  <div [nzGutter]="8" class="fit-height" nz-row>
    <div class="mb-20" nz-col nzMd="24" nzXl="8" nzXs="24">
      <app-widget [icon]="'stock'"
                  [prefix]="false"
                  [title]="'HOME.DASHBOARD.TICKETS'| translate | uppercase"
                  [value]="ticketsSold"></app-widget>
    </div>
    <div class="mb-20" nz-col nzMd="24" nzXl="8" nzXs="24">
      <app-widget [backgroundColor]="'orange'"
                  [icon]="'rise'"
                  [title]="'HOME.DASHBOARD.INGRESS'| translate | uppercase"
                  [value]="profits"></app-widget>
    </div>
    <div class="mb-20" nz-col nzMd="24" nzXl="8" nzXs="24">
      <app-widget [backgroundColor]="'grey'"
                  [icon]="'fall'"
                  [title]="'HOME.DASHBOARD.EGRESS'| translate | uppercase"
                  [value]="losses"></app-widget>
    </div>
  </div>
</div>

<div nz-col nzXs="24">
  <div #containerRef class="inner-content mb-20" style="min-height: 450px;max-height: 450px;overflow: hidden;">
    <app-title-divider title="Diagrama de organizacion"></app-title-divider>
    <ngx-graph
      [autoCenter]="false"
      [autoZoom]="true"
      [clusters]="clusters"
      [draggingEnabled]="false"
      [links]="links"
      [miniMapPosition]="miniMapPosition.UpperLeft"
      [nodes]="nodes"
      [showMiniMap]="true"
      [view]="[containerRef.offsetWidth, 400]"
      class="chart-container"
      layout="dagreCluster"
    >
      <ng-template #nodeTemplate let-node>
        <svg:g class="node">
          <svg:rect
            [attr.fill]="node.data.color"
            [attr.height]="node.dimension.height"
            [attr.width]="node.dimension.width"
          />
          <svg:text [attr.x]="10" [attr.y]="node.dimension.height / 2" alignment-baseline="central">
            {{node.label}}
          </svg:text>
        </svg:g>
      </ng-template>
    </ngx-graph>
  </div>
</div>

<div class="inner-content fit-height mb-20">
  <app-title-divider title="{{'Resumen Consorcios' |translate}}"></app-title-divider>
  <app-admin-consortiums-table></app-admin-consortiums-table>
</div>
<div class="inner-content fit-height mb-20">
  <app-title-divider title="{{'Resumen Bancas' |translate}}"></app-title-divider>
  <app-shared-bankings-table></app-shared-bankings-table>
</div>
<div [nzGutter]="8" nz-row>
  <div nz-col nzXl="12" nzXs="24">
    <div class="inner-content mb-20" style="min-height: 460px;">
      <app-title-divider
        title="{{'Balance por consorcio' | translate}}"></app-title-divider>
      <app-bar-chart [results]="barChartDataConsortiums" xAxisLabel="Consorcio" yAxisLabel="Balance"></app-bar-chart>
    </div>
  </div>
  <div nz-col nzXl="12" nzXs="24">
    <div class="inner-content mb-20" style="min-height: 460px;">
      <app-title-divider
        title="{{'Balance por banca' | translate}}"></app-title-divider>
      <app-bar-chart [results]="barChartDataBankings" xAxisLabel="Banca" yAxisLabel="Balance"></app-bar-chart>
    </div>
  </div>
  <!--<div nz-col nzXs="24" nzXl="12">
    <div class="inner-content mb-20" style="min-height: 460px;">
      <app-title-divider title="Ganancias vs Perdidas"></app-title-divider>
      <app-pie-chart [height]="400" [results]="single"></app-pie-chart>
    </div>
  </div>-->
</div>

